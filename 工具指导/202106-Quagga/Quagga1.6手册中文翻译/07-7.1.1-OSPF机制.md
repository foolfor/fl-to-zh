### 7.1.1 OSPF机制

OSPF定义了一系列机制，涉及通过网络检测、描述和传播状态。这些机制几乎都将在后面更详细地介绍。它们可以大致分为：

```shell
The Hello Protocol
```

OSPF Hello 协议允许 OSPF 快速检测链路上路由器之间双向可达性的变化。OSPF 还可以利用其他可达性信息来源，例如硬件提供的链路状态信息，或通过专用可达性协议（例如BFD（双向转发检测））。

OSPF 还使用 Hello 协议在共享链路的路由器之间传播某些状态，例如：

- Hello 协议配置状态，例如死区。
- 路由器优先级，用于DR/BDR选举。
- DR/BDR 选举结果。
- 每个路由器支持的任何可选功能。

Hello 协议比较简单，不会比这里更详细地探讨。



```shell
LSAs
```

OSPF的核心是LSA（链路状态通告）消息。尽管名称如此，但一些LSA严格来说并没有描述链路状态信息。常见的 LSA描述的信息有：

- 路由器，就其链接而言。

- 网络，就连接的路由器而言。

- 链路状态域外部的路由：

  - 外部路线

    路由完全在OSPF外部。发起此类路由的路由器称为ASBR（自治系统边界路由器）路由器。

  - 总结路线

    汇总与手头 OSPF 链路状态区域外部的 OSPF 区域相关的路由信息的路由，由ABR（区域边界路由器）路由器发起 。



```shell
LSA Flooding
```

OSPF 定义了几种相关机制，用于管理邻居之间LSDB的同步， 因为邻居形成邻接和传播，或新的或更新的LSA的*泛洪*。

请参阅[OSPF 泛洪](https://www.quagga.net/docs/docs-multi/OSPF-Fundamentals.html#OSPF-Flooding)。



```shell
Areas
```

OSPF 允许将协议分解为多个较小且独立的链路状态区域。每个区域必须通过ABR（区域边界路由器）连接到公共骨干区域。这些 ABR路由器负责将一个区域的链路状态路由信息*汇总*到*汇总 LSA 中*，可能采用压缩（即聚合）形式，然后将这些汇总发送到ABR连接到的所有其他区域。

请注意，区域之间仅传递摘要和外部路由。由于这些描述*路径*，而不是任何路由器链接状态，因此区域之间的路由是通过*距离向量*，**而不是** 链接状态。

请参阅[OSPF 区域](https://www.quagga.net/docs/docs-multi/OSPF-Fundamentals.html#OSPF-Areas)。